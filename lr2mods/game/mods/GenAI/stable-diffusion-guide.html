<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab Rats GenAI Guide: Stable Diffusion Setup</title>
    <style>
        :root {
            --primary-color: #5d69be;
            --secondary-color: #f8f9fa;
            --accent-color: #e74c3c;
            --text-color: #333;
            --light-gray: #eee;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: var(--secondary-color);
        }

        header {
            background-color: var(--primary-color);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        h1 {
            margin: 0;
            font-size: 2.2em;
        }

        h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--light-gray);
            padding-bottom: 10px;
            margin-top: 40px;
        }

        .intro {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }

        .steps-container {
            background-color: white;
            border-radius: 8px;
            padding: 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }

        .step {
            padding: 20px;
            border-bottom: 1px solid var(--light-gray);
        }

        .step:last-child {
            border-bottom: none;
        }

        .step-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .step-number {
            background-color: var(--primary-color);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .step-title {
            font-size: 1.4em;
            font-weight: 600;
            margin: 0;
        }

        .code-block {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            overflow-x: auto;
            margin: 15px 0;
        }

        .note {
            background-color: #fffbea;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }

        a {
            color: var(--primary-color);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        .optional {
            background-color: #f0f7ff;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }

        .summary {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .summary-item {
            background-color: var(--primary-color);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <header>
        <h1>Lab Rats GenAI Guide</h1>
        <p>Setting up Stable Diffusion with Automatic1111's WebUI</p>
    </header>

    <div class="intro">
        <h2>What is Stable Diffusion and Automatic1111's Stable Diffusion WebUI?</h2>
        <p>Stable Diffusion is an AI model for generating images given a text prompt. Automatic1111's Stable Diffusion WebUI is a web interface for running Stable Diffusion. It is the easiest way to run Stable Diffusion on your computer, and provides an API that we can use to integrate Stable Diffusion into other applications.</p>

        <div class="summary">
            <div class="summary-item">Install WebUI</div>
            <div class="summary-item">Download Models</div>
            <div class="summary-item">Configure Settings</div>
            <div class="summary-item">Run the Application</div>
        </div>
    </div>

    <div class="steps-container">
        <div class="step">
            <div class="step-header">
                <div class="step-number">1</div>
                <h3 class="step-title">Install Automatic1111's Stable Diffusion WebUI</h3>
            </div>
            <p>Before we start, you need to install the Stable Diffusion WebUI. To do this, follow the detailed instructions for installation on Windows, Linux, and Mac on the Stable Diffusion WebUI GitHub page.</p>
            <p><a href="https://github.com/AUTOMATIC1111/stable-diffusion-webui#installation-and-running" target="_blank">https://github.com/AUTOMATIC1111/stable-diffusion-webui#installation-and-running</a></p>
        </div>

        <div class="step">
            <div class="step-header">
                <div class="step-number">2</div>
                <h3 class="step-title">Download the relevant models</h3>
            </div>
            <p>You'll need a model. I can recommend these if you don't already have one in mind:</p>
            <ul>
                <li><strong>DreamShaper XL:</strong> <a href="https://civitai.com/models/112902/" target="_blank">https://civitai.com/models/112902/</a></li>
				<li><strong>Juggernaut XL:</strong> <a href="https://civitai.com/models/133005" target="_blank">https://civitai.com/models/133005</a></li>
				<li><strong>Life Like Diffusion:</strong> <a href="https://civitai.com/models/16804" target="_blank">https://civitai.com/models/16804</a></li>
            </ul>
        </div>

        <div class="step">
            <div class="step-header">
                <div class="step-number">3</div>
                <h3 class="step-title">Place the models in their corresponding directories</h3>
            </div>
            <p>Next, you need to place the model in the appropriate directory in the Stable Diffusion WebUI:</p>
            <p>Place the model file (dreamshaperXL_v21TurboDPMSDE.safetensors for example) in <code>stable-diffusion-webui/models/Stable-diffusion</code></p>
        </div>

        <div class="step">
            <div class="step-header">
                <div class="step-number">4</div>
                <h3 class="step-title">Configure Automatic1111's Stable Diffusion WebUI</h3>
            </div>
            <p>To prepare the WebUI for running, you need to modify the COMMANDLINE_ARGS line in either webui-user.sh (if you're using Linux/Mac) or webui-user.bat (if you're using Windows) to include the following:</p>

            <h4>Linux/Mac:</h4>
            <div class="code-block">
                export COMMANDLINE_ARGS="--medvram --no-half-vae --listen --port=7860 --api --cors-allow-origins *"
            </div>

            <h4>Windows:</h4>
            <div class="code-block">
                set COMMANDLINE_ARGS=--medvram --no-half-vae --listen --port=7860 --api --cors-allow-origins *
            </div>
        </div>

        <div class="step">
            <div class="step-header">
                <div class="step-number">5</div>
                <h3 class="step-title">Running the WebUI</h3>
            </div>
            <p>Now you can run the WebUI by executing either webui.sh (Linux/Mac) or webui-user.bat (Windows). Note that the WebUI server needs to be running the whole time you're using it. Once it's running you can open the game.</p>
        </div>

        <div class="step">
            <div class="step-header">
                <div class="step-number">6</div>
                <h3 class="step-title">Check it works</h3>
            </div>
            <p>At this point, you can check the GenAI Config button at the bottom among the other quick actions (should be after Prefs and before Cheat).</p>
            <p>When you open that menu if everything is working there will be a dropdown called Model where you can select DreamShaper XL.</p>
            <p>You can also congigure the other settings here such as steps, cfg scale, sampler and whether to use the upscaler.</p>
            <p>If there are no models then renpy cannot establish a connection with stable diffusion, there is a "retry connection" button you can click to make it check again if you think it's fixed.</p>
			<p>Make sure to read the settings the model prefers, for example the DreamShaper XL v2.1 Turbo DPM++ SDE model would have settings like:</p>
			<ul>
				<li>Sampler: DPM++ SDE</li>
				<li>Steps: 4</li>
				<li>CFG: 2</li>
				<li>Width: 1024</li>
				<li>Height: 1024</li>
			</ul>
        </div>

        <div class="step optional">
            <div class="step-header">
                <div class="step-number">7</div>
                <h3 class="step-title">Optimize Your Install (Optional)</h3>
            </div>
            <p>When installing extensions in the stable diffusion webui make sure to remove your command line arguments</p>
            <h4>ADetailer</h4>
            <p>ADetailer is a performant way to refine your images (taking less than 10ms on some systems)</p>
            <p><a href="https://github.com/Bing-su/adetailer" target="_blank">https://github.com/Bing-su/adetailer</a></p>
            <p>Follow the instructions on the GitHub page to install. Remember to restart Stable Diffusion!</p>
        </div>

        <div class="step">
            <div class="step-header">
                <div class="step-number">8</div>
                <h3 class="step-title">How to play</h3>
            </div>
            <p>If your stable diffusion connection looks good, you can approach any person and where their image would normally go there are some buttons:</p>
            <ul>
                <li><strong>Generate new image:</strong> This will make a new image of the person using the current prompt and append it to the list for that person</li>
                <li><strong>Regenerate current image:</strong> This will make a new image but instead of appending will delete the current image and replace it</li>
                <li><strong>Delete current image:</strong> This will delete the current image (both in-game and the actual image file)</li>
                <li><strong>Next/previous:</strong> This will allow you to switch between all generated images for that person</li>
                <li><strong>The image itself:</strong> clicking the generated image will fullscreen it so you can see it better</li>
            </ul>
			<h4>Character has changed</h4>
			<p>Whenever the generated prompt changes, due to clothes or position change you should see the text "Character has changed". This indicates that you can generate a new image. You don't have to generate an image for every change (like when characters are stripping). However once an image is generated it will quick switch back to it if the character matches, so if the character is ever in the same clothes/position it will switch to that image instantly in the future.</p>

            <p>When you are talking with someone (when you can see their image/generate buttons) you can open the GenAI config menu and at the top will be some person specific options:</p>
            <ul>
                <li><strong>Seed:</strong> Each person is assigned a unique seed when you meet them, this helps keep the generations very similar so they appear to generally be the same person. You can manually input your own seed or click "Generate New Random Seed" to make a new one. Note that they will likely look like a different person.</li>
                <li><strong>Positive/Negative Prompt:</strong> You can read the generated positive prompt for their current appearance and position, you can use this to simply see what has changed and maybe indicate why the image looks bad (often the model just ignores part of the prompt). You can also toggle to override the prompt, this will prevent it from updating when the character changes but allows you to manually edit the prompt to whatever you like. This may allow you to fix a generation without having to change the seed. You can also append to the prompt which could allow you to add a face lora for example</li>
				<li><strong>Prompt Style:</strong> You can edit the style part of the prompt, by default this is set for photorealstic with a black background, but if your model was better suited to anime or cartoon then you can rewrite the style so it generates what you want</li>
            </ul>
        </div>
    </div>

    <footer>
        <p>Â© 2025 Lab Rats GenAI Guide</p>
    </footer>
</body>
</html>
